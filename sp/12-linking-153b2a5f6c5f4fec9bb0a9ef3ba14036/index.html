<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-root" content="/tech">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="2.4.0.713082756900">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 2.4.0">

    <!-- Primary Meta Tags -->
    <title>12. Linking</title>
    <meta name="title" content="12. Linking">
    <meta name="description" content="A process of collecting and combining various pieces of code and data into a single file that can be loaded (copied) into memory and executed" />

    <!-- Canonical -->
    <link rel="canonical" href="/tech/sp/12-linking-153b2a5f6c5f4fec9bb0a9ef3ba14036/" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="/tech/sp/12-linking-153b2a5f6c5f4fec9bb0a9ef3ba14036/">
    <meta property="og:title" content="12. Linking">
    <meta property="og:description" content="A process of collecting and combining various pieces of code and data into a single file that can be loaded (copied) into memory and executed">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="/tech/sp/12-linking-153b2a5f6c5f4fec9bb0a9ef3ba14036/">
    <meta property="twitter:title" content="12. Linking">
    <meta property="twitter:description" content="A process of collecting and combining various pieces of code and data into a single file that can be loaded (copied) into memory and executed">

    <script>(function () { var el = document.documentElement, m = localStorage.getItem("/tech/doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="../../favicon.ico" rel="icon" />
    <link href="../../resources/css/retype.css?v=2.4.0.713082756900" rel="stylesheet" />

    <script type="text/javascript" src="../../resources/js/config.js?v=2.4.0.713082756900" data-turbo-eval="false" defer></script>
    <script type="text/javascript" src="../../resources/js/retype.js?v=2.4.0" data-turbo-eval="false" defer></script>
    <script id="lunr-js" type="text/javascript" src="../../resources/js/lunr.js?v=2.4.0.713082756900" data-turbo-eval="false" defer></script>
    <script id="prism-js" type="text/javascript" src="../../resources/js/prism.js?v=2.4.0.713082756900" defer></script>
</head>
<body>
    <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
        <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>
    
        <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
            <div class="container relative flex items-center justify-between grow pr-6 md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="docs-sidebar-toggle"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-site-logo" href="../../" class="flex items-center leading-snug text-2xl">
                            <span class="w-10 mr-2 grow-0 shrink-0 overflow-hidden">
                                <img class="max-h-10 dark:hidden md:inline-block" src="../../static/saintly-logo.svg">
                                <img class="max-h-10 hidden dark:inline-block" src="../../static/saintly-logo-dark.svg">
                            </span>
                            <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">S.KYUHWN</span>
                        </a>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="../../">Home</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/underthelights/">GitHub</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://drive.google.com/file/d/1lcEg4fXJvTQlCKW5mWai_ej8NZGg21yT/view">Resume</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://www.linkedin.com/in/kyuhwan-shim/">Linkedin</a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://underthelights.github.io">GitBlog</a>
                            </li>
        
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
        
                            <input class="w-full h-10 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 placeholder-gray-400 dark:placeholder-dark-400"
                            style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search" />
                        </div>
        
                        <!-- Mobile search button mock -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placehokder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button mock -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="docs-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">
            
                <!-- Render this div, if config.showSidebarFilter is `true` -->
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter" />
                </div>
            
                <div class="pl-6 mb-4 mt-1">
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                </div>
            
                <div class="shrink-0 mt-auto bg-transparent dark:border-dark-650">
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650">
            
                        <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                            <nav>
                                <ul class="flex flex-wrap justify-center items-center">
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="../../">Home</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/underthelights/">GitHub</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://drive.google.com/file/d/1lcEg4fXJvTQlCKW5mWai_ej8NZGg21yT/view">Resume</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://www.linkedin.com/in/kyuhwan-shim/">Linkedin</a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://underthelights.github.io">GitBlog</a>
                                    </li>
            
                                </ul>
                            </nav>
                        </div>
            
                        <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                            <span class="text-xs whitespace-nowrap">Powered by</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                        </a>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 dark:bg-dark-850">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div class="grow min-w-0 px-6 md:px-16">
                        <main class="relative pt-6 pb-16">
                            <div class="docs-markdown" id="docs-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="docs-sidebar-right-toggle"></div>
                
                                <!-- Page content  -->
<doc-anchor-target id="12-linking" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#12-linking">#</doc-anchor-trigger>
        <span>12. Linking</span>
    </h1>
</doc-anchor-target>
<doc-anchor-target id="linking">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#linking">#</doc-anchor-trigger>
        <span>Linking</span>
    </h1>
</doc-anchor-target>
<doc-anchor-target id="whats-linking">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#whats-linking">#</doc-anchor-trigger>
        <span>What’s linking?</span>
    </h2>
</doc-anchor-target>
<ul>
<li><p>A process of collecting and combining various pieces of code and data into a single file that can be loaded (copied) into memory and executed
여러 코드와 데이터를 모아 memory에 load될 수 있고 executable file 하나로 만드는 작업</p>
<ul>
<li>큰 규모의 프로그램을 한 개의 소스 파일로 구성하는 대신</li>
<li>별도로 editable, compilable smaller module로 나눌 수 있음</li>
<li>edit할 때 단순히 해당 파일을 recompile하고 다른 file을 recompile할 필요 없이 link함.</li>
</ul>
</li>
<li><p>작은 프로그램을 만든다고 하면 linking이 필요 없지만 큰 프로그램을 만들면 잘게 잘게 기능을 나누어 쪼갤 필요가 있다.</p>
</li>
<li><p>Linking can be performed at compile time, load time, and run time</p>
<ul>
<li>compile time 시 수행 - src code는 기계어로 translate됨</li>
<li>load time - application program에 의해 수행</li>
<li>run time</li>
</ul>
</li>
<li><p>Linking is performed automatically by programs called linkers on modern systems</p>
<ul>
<li>초기에는 수동으로 수행된 linking → 현재는 linker가 대신 수행해줌</li>
</ul>
</li>
</ul>
<doc-anchor-target id="why-bother-learning-about-linking">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#why-bother-learning-about-linking">#</doc-anchor-trigger>
        <span>Why bother learning about linking?</span>
    </h2>
</doc-anchor-target>
<ul>
<li>Understanding linkers will help you</li>
</ul>
<doc-anchor-target id="build-large-programs-큰-프로그램-작성에-도움">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#build-large-programs-큰-프로그램-작성에-도움">#</doc-anchor-trigger>
        <span>build large programs 큰 프로그램 작성에 도움</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Unless you understand how a linker resolve references, what a library is, and how a linker uses a library to resolve references, these kinds of errors will be baffling and frustrating.</li>
<li>발생되는 linker error들에 대한 식견</li>
<li>작은 프로그램 compile하고 linking하는 과정
<ul>
<li>local + external defined symbol들을 어떻게 reference할 수 있느냐.</li>
<li>Malloc / printf reference : 어떻게 library를 활용하여 reference하느냐</li>
</ul>
</li>
<li>linux에서 직접 link해보면 link error가 많이 뜨는데 이해하기 쉬워질 것</li>
</ul>
<doc-anchor-target id="avoid-dangerous-programming-errors-위험한-에러를-피할-수-있음">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#avoid-dangerous-programming-errors-위험한-에러를-피할-수-있음">#</doc-anchor-trigger>
        <span>avoid dangerous programming errors 위험한 에러를 피할 수 있음</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Programs that incorrectly define multiple global variables can pass through the linker without any warnings in the default case. The resulting programs can exhibit baffling run-time behavior and are extremely difficult to debug.</li>
<li>global var을 여러 분야에서 잘못 선언 : run-time시에 여러 문제가 생길 수 있음</li>
<li>linker에서 잡아주지 못하는 / linker의 기능과 방식 을 잘 이해하지 못한 상태에서 runtime 때 찾기는 어렵다
<ul>
<li>debug하기도 어려운 상황에서→ 어떻게 권장하는지를 보고 어떻게 발생하고 회피하는지 알 수 있음</li>
</ul>
</li>
</ul>
<doc-anchor-target id="understand-how-language-scoping-rules-are-implemented">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#understand-how-language-scoping-rules-are-implemented">#</doc-anchor-trigger>
        <span>understand how language scoping rules are implemented</span>
    </h3>
</doc-anchor-target>
<ul>
<li>What’s the difference between global and local variables? (전역 vs 지역)</li>
<li>What does it really mean when you define a variable or function with the <strong>static</strong> attribute?</li>
</ul>
<doc-anchor-target id="understand-other-important-systems-concepts">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#understand-other-important-systems-concepts">#</doc-anchor-trigger>
        <span>understand other important systems concepts</span>
    </h3>
</doc-anchor-target>
<ul>
<li>The executable object files produced by linkers play key roles in important systems functions such as loading and running programs, virtual memory, paging, and memory mapping</li>
<li>system의 중요한 여러 개념들을 이해하는 데 도움</li>
</ul>
<doc-anchor-target id="enable-you-to-exploit-shared-libraries">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#enable-you-to-exploit-shared-libraries">#</doc-anchor-trigger>
        <span>enable you to exploit shared libraries</span>
    </h3>
</doc-anchor-target>
<ul>
<li>With the increased importance of shared libraries and dynamic linking in modern operating systems, linking is a sophisticated process that provides the knowledgeable programmer with significant power.
현대 사회에서 중요해진 shared library, dynamic linking의 중요성 → 주요 능력을 제공하는 process
<ul>
<li>쉬우면서도 간과하는 부분이 많은 linking</li>
</ul>
</li>
<li>For example, many software products use shared libraries to upgrade shrink-wrapped binaries at run time.
<ul>
<li>shared library : dynamic linking 다양하게 쓰임</li>
<li>smaller하게 된 binary를 runtime때 upgrade</li>
</ul>
</li>
<li>Many Web servers rely on dynamic linking of shared libraries to serve dynamic content.5
<ul>
<li>많은 sw들은 runtime 시에 linking많이 씀 : service할 때 동적으로 mapping</li>
</ul>
</li>
</ul>
<doc-anchor-target id="example-c-program">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#example-c-program">#</doc-anchor-trigger>
        <span>Example C Program</span>
    </h2>
</doc-anchor-target>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-c"><code v-pre class="language-c">int sum(int *a, int n);
int array[2] = {1, 2};
int main()
{
    int val = sum(array, 2);
    return val;
}</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-cpp"><code v-pre class="language-cpp">
int sum(int *a, int n)
{
    int i, s = 0;
    for (i = 0; i &lt; n; i++)
    {
        s += a[i];
    }
    return s;
}</code></pre>
</doc-codeblock></div>
<ul>
<li>각각에 대해서 linking을 수행하여 하나의 executable file</li>
<li>sum이라는 procedure는 sum.c로부터 reference하여 구동시켜 Main 함수에서 integer array</li>
</ul>
<doc-anchor-target id="static-linking">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#static-linking">#</doc-anchor-trigger>
        <span>Static Linking</span>
    </h1>
</doc-anchor-target>
<ul>
<li><p>Programs are translated and linked using a compiler driver:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-cpp"><code v-pre class="language-cpp">linux&gt; gcc -Og -o prog main.c sum.c
linux&gt; ./prog</code></pre>
</doc-codeblock></div>
</li>
</ul>
<doc-anchor-target id="compiler-driver">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#compiler-driver">#</doc-anchor-trigger>
        <span>Compiler driver</span>
    </h2>
</doc-anchor-target>
<ul>
<li>Preprocessor, compiler, assembler, linker를 필요에 따라 user 대신하여 호출</li>
</ul>
<p><figure class="content-center">
    <img src="1220linking20153b2a5f6c5f4fec9bb0a9ef3ba14036/untitled.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<ul>
<li>C preprocessor (cpp) : <code v-pre>main.c</code> → <code v-pre>main.i</code>
<ul>
<li>translates the C source file main.c into an ASCII intermediate file main.i</li>
</ul>
</li>
<li>C Compiler (cc1) : <code v-pre>main.i</code> → <code v-pre>main.s</code>
<ul>
<li>translates main.i into an ASCII assembly-language file main.s</li>
</ul>
</li>
<li>Assembler (as)<code v-pre>main.s</code> → <code v-pre>main.o</code>
<ul>
<li>translates main.s into a binary relocatable object file main.o</li>
</ul>
</li>
<li>Linker (ld)
<ul>
<li>combine main.o and sum.o along with the necessary object files,to create the binary executable object file</li>
<li>ld 실행 : prog을 생성하기 위해 main.o / sum.o 연결</li>
</ul>
</li>
</ul>
<p>→ <code v-pre>./prog</code> : prog 실행</p>
<ul>
<li><p>Shell은 loader라는 OS Function을 호출하여, 실행 파일 prog의 code, data를 memory로 복사하고 control을 program 시작 부분으로 전환한다.</p>
</li>
<li><p>Source File</p>
<ul>
<li>각 symbol들의 주소, access하는 주소
memory할 때 어디에 올라가는지
VM에서 어디 부분에 올라가는지 등은 잘 정해져 있지 않기 때문에 relocate필요</li>
</ul>
</li>
<li><p>Separately compiled relocatable obj files</p>
<ul>
<li>linking해야지 virtual memory 상 어디에 올라가는지 상대적인 offset 부분을 나중에 알 수 있기 때문에, 나중에 relocate되는 obj file이라고 부른다.
그러고 나서 나중에 linking되게 되면 실행 file 생성</li>
</ul>
</li>
<li><p>Fully linked</p>
</li>
</ul>
<doc-anchor-target id="why-linkers">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#why-linkers">#</doc-anchor-trigger>
        <span>Why Linkers?</span>
    </h2>
</doc-anchor-target>
<doc-anchor-target id="reason-1-modularity">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#reason-1-modularity">#</doc-anchor-trigger>
        <span>Reason 1: Modularity</span>
    </h3>
</doc-anchor-target>
<p>Program can be written as a collection of smaller source files, rather than one monolithic mass.
구조적으로 쪼개서 작은 source file로 만든다 → 내가 필요한 부분들만 쓸 수 있게 하는데 도움이 된다</p>
<ul>
<li>Can build libraries of common functions (more on this later)
<ul>
<li>Standard c library, math library : 다른 application에서도 사용 가능</li>
<li>e.g., Math library, standard C library</li>
</ul>
</li>
</ul>
<doc-anchor-target id="reason-2-efficiency">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#reason-2-efficiency">#</doc-anchor-trigger>
        <span>Reason 2: Efficiency</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Time: Separate compilation
<ul>
<li>sum.c code만 수정하고 sum.c만 recompile</li>
<li>monolithic한 프로그램이 아니라면 코드 전체를 모두 compile하는 것보다 더 빨라짐</li>
<li>Change one source file, compile, and then relink.</li>
<li>No need to recompile other source files.</li>
</ul>
</li>
<li>Space: Libraries
<ul>
<li>Common functions can be aggregated into a single file...
<ul>
<li>하나의 compile로 만들어질 수 있음</li>
<li>모두다 사용하는게 아니고, 특정한 부분만 사용할 수 있기 때문에 필요한 특정한 부분만 사용하는거기 때문에 필요에 따라 linker를 돌아 사용하는게 효과적</li>
</ul>
</li>
<li>Yet executable files and running memory images contain only code for the functions they actually use.
<ul>
<li>memory에 다 올라갈 필요가 없음 → powerful software programming</li>
</ul>
</li>
</ul>
</li>
</ul>
<doc-anchor-target id="what-do-linkers-do">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#what-do-linkers-do">#</doc-anchor-trigger>
        <span>What Do Linkers Do?</span>
    </h2>
</doc-anchor-target>
<ul>
<li>to make executable file → linker는 두 가지 step task를 수행해야 한다.</li>
</ul>
<doc-anchor-target id="step-1-symbol-resolution">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-1-symbol-resolution">#</doc-anchor-trigger>
        <span>Step 1: Symbol resolution</span>
    </h3>
</doc-anchor-target>
<ul>
<li><p>Programs define and reference symbols (global variables and functions):</p>
<ul>
<li>program 내부에서 여러 symbol을 가져다가 reference</li>
</ul>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-cpp"><code v-pre class="language-cpp">void swap() {...} /* define symbol swap */
swap(); /* reference symbol swap */
int *xp = &amp;x; /* define symbol xp, reference x */</code></pre>
</doc-codeblock></div>
<ul>
<li>Swap function definition - reference</li>
<li>xp라는 symbol : x라는 variable의 address value</li>
</ul>
</li>
<li><p>Symbol definitions are stored in object file (by assembler) in symbol table.</p>
<ul>
<li>Symbol table is an array of structs → Executable file 생성 이전 object file : section에 symbol table이 들어감.
<ul>
<li>Each entry includes name, size, and location of symbol.</li>
<li>compile시 preprocess다음 c compile하여 obj 파일 만들어질 때 elf라는 file format에서 symbol table 안에 저장되는데 각 symbol마다 크기, 이름, 위치 생성 정보를 가진 table</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>During symbol resolution step, the linker associates each symbol reference with exactly one symbol definition.</strong> symbol이 있으면 각각의 reference가 정확히 하나의 symbol definition과 대응되어야 한다.</p>
<ul>
<li>cnt가 두 번 initialized -&gt; linker error</li>
</ul>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-cpp"><code v-pre class="language-cpp">a.c :
int cnt= 5;
main(){…}

b.c : 
int cnt = 0;
Fun(){…}</code></pre>
</doc-codeblock></div>
</li>
</ul>
<doc-anchor-target id="step-2-relocation">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-2-relocation">#</doc-anchor-trigger>
        <span>Step 2: Relocation</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Merges separate code and data sections into single sections
<ul>
<li>두개의 다른 object file (code/data)를 모아 하나의 section으로 만emsek.</li>
<li>0번지에서 시작하는 code, data section</li>
</ul>
</li>
<li>Executable file로 linux가 만들게 되는데 memory location에 올라가는 절대 주소로 변환 : 실제 가상메모리 주소는 어떻게 할 것이냐
<ul>
<li>Relocates symbols from their relative locations in the .o files to their final absolute memory locations in the executable.</li>
<li>linker : code/data section을 symbol def과 연결 → relocate하며 모든 reference를 모두 수정하여 절대주소를 가리키도록 함</li>
</ul>
</li>
<li>relocation entry : symbol에 대한 모든 reference 가 새로운 위치를 가리킬 수 있게 해 줌
<ul>
<li>Updates all references to these symbols to reflect their new positions.</li>
</ul>
</li>
</ul>
<p>Let’s look at these two steps in more detail....</p>
<doc-anchor-target id="three-kinds-of-object-files-modules">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#three-kinds-of-object-files-modules">#</doc-anchor-trigger>
        <span>Three Kinds of Object Files (Modules)</span>
    </h1>
</doc-anchor-target>
<doc-anchor-target id="relocatable-object-file-o-file">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#relocatable-object-file-o-file">#</doc-anchor-trigger>
        <span>Relocatable object file (.o file)</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Contains code and data in a form that can be combined with other relocatable object files to form executable object file.</li>
<li>Each .o file is produced from exactly one source (.c) file</li>
<li></li>
</ul>
<p>Main.o, .o</p>
<ul>
<li>code, data를 가지고 있는데 다른 relocatable file과 같이 compile되어 실행 file을 만들기 위한 code, data를 가진 object file</li>
</ul>
<doc-anchor-target id="executable-object-file-aout-file">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#executable-object-file-aout-file">#</doc-anchor-trigger>
        <span>Executable object file (a.out file)</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Contains code and data in a form that can be copied directly into memory and then executed.</li>
<li>명명 of <code v-pre>a.out</code>
<ul>
<li>BELL Lab에서 compile하고 executable file 이름을 지정하지 않을 때 a.out으로 명명</li>
<li>특정한 의미는 없음</li>
</ul>
</li>
</ul>
<doc-anchor-target id="shared-object-file-so-file">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#shared-object-file-so-file">#</doc-anchor-trigger>
        <span>Shared object file (.so file)</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Special type of relocatable object file that can be loaded intomemory and linked dynamically, at either load time or run-time.</li>
<li>Called Dynamic Link Libraries (DLLs) by Windows13</li>
</ul>
<doc-anchor-target id="executable-and-linkable-format-elf">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#executable-and-linkable-format-elf">#</doc-anchor-trigger>
        <span>Executable and Linkable Format (ELF)</span>
    </h1>
</doc-anchor-target>
<ul>
<li>Standard binary format for object files</li>
<li>One unified format for
<ul>
<li>Relocatable object files (.o),</li>
<li>Executable object files (a.out)</li>
<li>Shared object files (.so)</li>
</ul>
</li>
<li>Generic name: ELF binaries</li>
</ul>
<p><figure class="content-center">
    <img src="12/untitled201.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<doc-anchor-target id="elf-header-16-b">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#elf-header-16-b">#</doc-anchor-trigger>
        <span>Elf header (16 B)</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Describes word size, byte ordering, file type (.o, exec, .so), machine type, file offset of section header table, etc.</li>
</ul>
<doc-anchor-target id="section-header-table">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#section-header-table">#</doc-anchor-trigger>
        <span>Section header table</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Offsets and sizes of each section</li>
</ul>
<p><figure class="content-center">
    <img src="12/untitled202.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<doc-anchor-target id="text-section">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#text-section">#</doc-anchor-trigger>
        <span><code v-pre>.text</code> section</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Code (the machine code of the compiledprogram)</li>
<li>compile된 program의 기계어 code가 들어가 있음</li>
<li>c compile후 assembly에 의해 기계어 코드 (add, multiply, load, store에 대한 assembly에 대한 기계어 코드가 들어가 있음)</li>
</ul>
<doc-anchor-target id="rodata-section">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#rodata-section">#</doc-anchor-trigger>
        <span><code v-pre>.rodata</code> section</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Read only data: jump tables for switch</li>
<li>Read only data section : read only data, jump table, format string 가지고 있음</li>
</ul>
<doc-anchor-target id="data-section">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#data-section">#</doc-anchor-trigger>
        <span><code v-pre>.data</code> section</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Initialized global variables
<ul>
<li>Initialized global var : int count = 6;</li>
<li>Local variable static : static int a =3;</li>
</ul>
</li>
</ul>
<doc-anchor-target id="bss-section">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#bss-section">#</doc-anchor-trigger>
        <span><code v-pre>.bss</code> section</span>
    </h3>
</doc-anchor-target>
<ul>
<li><p>Uninitialized global variables</p>
<p>아직은 yet initialized : 위치만을 가지고 잇음 (공간 할당 x)</p>
</li>
<li><p>이름 : “Block Started by Symbol”, “Better Save Space”</p>
</li>
</ul>
<p>initialize된 global var을 구분함으로서 공간을 할당하지만 .bss는 공간을 할당하지 않아 공간 효용성을 구분할 수 있음 →Has section header but occupies no space</p>
<ul>
<li>나중에 memory에 load될 때는 0으로 초기화 : 그 때의 메모리 공간 생성</li>
</ul>
<p><figure class="content-center">
    <img src="12/untitled203.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<doc-anchor-target id="symtab-section">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#symtab-section">#</doc-anchor-trigger>
        <span><code v-pre>.symtab</code> section</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Symbol table with info. about functions and global variables (procedures and static variable names) that are defined and referenced in the program-</li>
</ul>
<doc-anchor-target id="reltextsection">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#reltextsection">#</doc-anchor-trigger>
        <span><code v-pre>.rel.text</code>section</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Relocation info for .text section</li>
<li>Addresses of instructions that will need to be modified in the executable
<ul>
<li>Instructions for modifying.-</li>
</ul>
</li>
</ul>
<doc-anchor-target id="reldatasection">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#reldatasection">#</doc-anchor-trigger>
        <span><code v-pre>.rel.data</code>section</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Relocation info for .data section</li>
<li>Addresses of pointer data that will need to be modified in the merged executable-</li>
</ul>
<doc-anchor-target id="debug-section">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#debug-section">#</doc-anchor-trigger>
        <span><code v-pre>.debug</code> section</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Info for symbolic debugging (gcc -g)ELF header.text section.rodata section.data section.bss section.symtab section.rel.txt section.rel.data section.debug sectionSection header table18</li>
</ul>
<doc-anchor-target id="symbols-and-symbol-tables">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#symbols-and-symbol-tables">#</doc-anchor-trigger>
        <span>Symbols and Symbol Tables</span>
    </h1>
</doc-anchor-target>
<ul>
<li>Each relocatable object module, m, has a symbol table
<ul>
<li>각각의 relocatable object (module) : 어떠한 module에 의해 reference / define되어 있는 symbol에 대한 정보를 가진 symbol table이 가진 정보</li>
</ul>
</li>
<li>The symbol table contains information about the symbols that are defined and referenced by m</li>
<li>In the context of a linker, there are three different kinds of symbols:
<ul>
<li>Global symbols</li>
<li>External symbols</li>
<li>Local symbols</li>
</ul>
</li>
</ul>
<doc-anchor-target id="linker-symbols">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#linker-symbols">#</doc-anchor-trigger>
        <span>Linker Symbols</span>
    </h2>
</doc-anchor-target>
<doc-anchor-target id="global-symbols">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#global-symbols">#</doc-anchor-trigger>
        <span>Global symbols</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Symbols defined by module m that can be referenced by other modules.</li>
<li>E.g.: non-static C functions and non-static global variables.
<ul>
<li>다른 module에 의해 reference될 수 있는 global variable
a.c/Int count = 5
b.c/Int count;</li>
</ul>
</li>
</ul>
<doc-anchor-target id="external-symbols">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#external-symbols">#</doc-anchor-trigger>
        <span>External symbols</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Global symbols that are referenced by module m but defined by some other module.</li>
<li>module에 의해서 reference되는 symbol이지만 다른 module에 의해서 defined되어 있는 것
<ul>
<li>a.c입장에서 b.c.의 count symbol</li>
</ul>
</li>
</ul>
<doc-anchor-target id="local-symbols">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#local-symbols">#</doc-anchor-trigger>
        <span>Local symbols</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Symbols that are defined and referenced exclusively by module m.</li>
<li>E.g.: C functions and global variables defined with the static attribute.</li>
<li><strong>Local linker symbols are not local program variables 20</strong></li>
</ul>
<doc-anchor-target id="local-linker-symbols-vs-local-program-variables">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#local-linker-symbols-vs-local-program-variables">#</doc-anchor-trigger>
        <span>Local linker symbols vs. Local program variables</span>
    </h2>
</doc-anchor-target>
<ul>
<li><code v-pre>.symtab</code> does not contain any symbols that correspond to local non-static program variables
<ul>
<li>var 중 non static variable들은 Symbol table에 들어가지 않음 / linker에 연관 x</li>
<li>Local var : stack / Local symbol : symbol table에 들어감</li>
</ul>
</li>
<li>Local non-static program variables are managed at run time on the stack and are not of interest to the linker</li>
</ul>
<p>See more details in next slides...</p>
<doc-anchor-target id="step-1-symbol-resolution-1">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-1-symbol-resolution-1">#</doc-anchor-trigger>
        <span>Step 1: Symbol Resolution</span>
    </h1>
</doc-anchor-target>
<p><figure class="content-center">
    <img src="12/untitled204.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<p>-</p>
<doc-anchor-target id="local-symbols-1">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#local-symbols-1">#</doc-anchor-trigger>
        <span>Local Symbols</span>
    </h2>
</doc-anchor-target>
<p>Local static var : global variable -&gt; .data</p>
<ul>
<li>단 local var이기 때문에 함수를 다시 호출하게 되면 재접속 가능
Local nonstatic var : static x, 일반 local var -&gt; @stack</li>
</ul>
<p>f, g에서 같은 variable x를 쓰지만 다른 symbol
X.1, x.2 이런식으로 compiler가 놓고 compiler가 unique한 이름을 가지도록 함.</p>
<ul>
<li>Local non-static C variables vs. local static C variables
<ul>
<li><p>local non-static C variables: stored on the stack</p>
</li>
<li><p>local static C variables: stored in either .bss, or .data</p>
<p>Local static var : global variable -&gt; .data</p>
<ul>
<li>단 local var이기 때문에 함수를 다시 호출하게 되면 재접속 가능
Local nonstatic var : static x, 일반 local var -&gt; @stack</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><figure class="content-center">
    <img src="12/untitled205.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<ul>
<li>Compiler allocates space in .data for each definition of x</li>
<li>Creates local symbols in the symbol table with unique names,
<ul>
<li>f, g에서 같은 variable x를 쓰지만 다른 symbol
→ x.1, x.2 이런식으로 compiler가 놓고 compiler가 unique한 이름을 가지도록 함.</li>
<li>e.g., x.1 and x.2</li>
</ul>
</li>
</ul>
<doc-anchor-target id="how-linker-resolves-duplicate-symbol-definitions">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#how-linker-resolves-duplicate-symbol-definitions">#</doc-anchor-trigger>
        <span>How Linker Resolves Duplicate Symbol Definitions</span>
    </h2>
</doc-anchor-target>
<ul>
<li>Program symbols are either strong or weak</li>
<li><strong>Strong:</strong> procedures and initialized globals
<ul>
<li>initialize되어 있는 variable</li>
</ul>
</li>
<li><strong>Weak:</strong> uninitialized globals
<ul>
<li>uninitialize되어 있는 variable</li>
</ul>
</li>
</ul>
<p><figure class="content-center">
    <img src="12/untitled206.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<doc-anchor-target id="linkers-symbol-rules">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#linkers-symbol-rules">#</doc-anchor-trigger>
        <span>Linker’s Symbol Rules</span>
    </h2>
</doc-anchor-target>
<ul>
<li><p><strong>Rule 1: Multiple strong symbols are not allowed</strong></p>
<ul>
<li>Each item can be defined only once</li>
<li>Otherwise: Linker error</li>
</ul>
<p>만일 symbol이 strong하다 - 단 한번만 선언 가능</p>
<ul>
<li>compiler가 보고 나서 foo=5(p1.c) / foo=10(p2.c) -&gt; link error</li>
<li>같은 게 strong이면 안됨</li>
</ul>
</li>
<li><p><strong>Rule 2: Given a strong symbol and multiple weak symbols, choose the strong symbol</strong></p>
<ul>
<li>References to the weak symbol resolve to the strong symbol</li>
<li>Weak가 strong을 쫓아간다.</li>
<li>P2의 foo : weak-&gt; p1의 foo : strong을 쫓아감
p2에서 foo 접근 = p1에서의 foo 접근</li>
</ul>
</li>
<li><p><strong>Rule 3: If there are multiple weak symbols, pick anarbitrary one</strong></p>
<ul>
<li>둘다 weak면 compiler가 임의로 설정</li>
</ul>
</li>
</ul>
<p>rule 1.</p>
<p>만일 symbol이 strong하다 - 단 한번만 선언 가능</p>
<ul>
<li>compiler가 보고 나서 foo=5(p1.c) / foo=10(p2.c) -&gt; link error</li>
<li>같은 게 strong이면 안됨</li>
</ul>
<p>Rule 2.</p>
<p>Weak가 strong을 쫓아간다.</p>
<ul>
<li>P2의 foo : weak-&gt; p1의 foo : strong을 쫓아감</li>
</ul>
<p>p2에서 foo 접근 = p1에서의 foo 접근</p>
<p>rule3</p>
<p>둘다 weak면 compiler가 임의로 설정</p>
<doc-anchor-target id="linker-puzzle">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#linker-puzzle">#</doc-anchor-trigger>
        <span>Linker Puzzle</span>
    </h2>
</doc-anchor-target>
<p><figure class="content-center">
    <img src="12/untitled207.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<ul>
<li>link error - 모종의 이유로 version이 달라 뜨는 error</li>
</ul>
<p><figure class="content-center">
    <img src="12/untitled208.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<p>-</p>
<p><figure class="content-center">
    <img src="12/untitled209.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<ul>
<li>둘 중에 무엇을 선택할 지 모름 (weak)
<ul>
<li>1-&gt;2, : y를 overwrite하지 않음 / 2-&gt;1 : overwrite</li>
</ul>
</li>
<li>→ ‘might’라는 용어 사용 : 해당 xy가 다른 strong symbol reference할 수 있기 때문이다</li>
</ul>
<p><figure class="content-center">
    <img src="12/untitled2010.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<ul>
<li>double로 선언한 x (8byte) - integer 로 원래 선언된 형태 → y에게도 악영향</li>
</ul>
<p><figure class="content-center">
    <img src="12/untitled2011.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<ul>
<li>Nightmare scenario : 2 identical weak structs, compiled by different compilers with different alignment rules (compiler dependent)</li>
</ul>
<p>link error</p>
<ul>
<li>모종의 이유로 version이 달라 뜨는 error</li>
</ul>
<doc-anchor-target id="two-weak-definitions-of-x-rule-3">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#two-weak-definitions-of-x-rule-3">#</doc-anchor-trigger>
        <span>Two weak definitions of x (rule 3)</span>
    </h2>
</doc-anchor-target>
<ul>
<li>Run-time bugs
<ul>
<li><p>Can cause some insidious run-time bugs that are incomprehensible to the unwary programmer</p>
</li>
<li><p>compiler error가 발생하지는 않는데</p>
</li>
<li><p>둘 다 uninitialized된 형태, f 수행 후 15212로 변화</p>
<p><img src="12/untitled2012.png" alt="Untitled" /></p>
</li>
</ul>
</li>
</ul>
<doc-anchor-target id="another-example-rule-2">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#another-example-rule-2">#</doc-anchor-trigger>
        <span>Another example (rule 2)</span>
    </h2>
</doc-anchor-target>
<ul>
<li><p>Subtle and nasty run-time bugs!</p>
<ul>
<li>On an x86-64/Linux machine, doubles are 8 bytes and ints are 4 bytes</li>
<li>Suppose the address of x is 0x601020 and the address of y is 0x601024</li>
<li>The assignment x = 0.0 in lin6 6 will overwrite the memory locations for x and y with the double-precision floating-point representation of negative zero!</li>
</ul>
<p><img src="12/untitled2013.png" alt="Untitled" /></p>
<ul>
<li>Compile error 전혀 안 뜸</li>
<li>나도 모르게 y값이 바뀜, 그러나 link error를 runtime때 찾기에는 너무 어렵다
<ul>
<li>→ 주의깊게 익혀야 한다.</li>
</ul>
</li>
</ul>
<p>library에서 우연치 않게 같은 symbol을 써서 이상하게 돌아가는 경우도 발생가능</p>
<p>Compile error 전혀 안 뜸</p>
<ul>
<li>나도 모르게 y값이 바뀜</li>
<li>link error를 runtime때 찾기에는 너무 어렵다</li>
<li>
<blockquote>
<p>주의깊게 익혀야 한다.</p>
</blockquote>
</li>
</ul>
<p>library에서 우연치 않게 같은 symbol을 써서 이상하게 돌아가는 경우도 발생가능</p>
</li>
</ul>
<doc-anchor-target id="global-variables">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#global-variables">#</doc-anchor-trigger>
        <span>Global Variables</span>
    </h2>
</doc-anchor-target>
<ul>
<li>Avoid if you can</li>
<li>Otherwise
<ul>
<li><p>Use static if you can</p>
<ul>
<li>data 에서 선언되지만 해당 함수 내에서만 접근 가능</li>
</ul>
</li>
<li><p>Initialize if you define a global variable : initialize해서 가급적 문제가 발생하지 않도록 함.</p>
</li>
<li><p>Use extern if you reference an external global variable</p>
<ul>
<li>Initialize된 형태로 써라 (쓰지 않을 수 있다면 쓰지 마라)</li>
<li>→ 예기치 않은 runtime bug에 빠지지 않도록 해라.</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol>
<li>static 선언</li>
</ol>
<ul>
<li>data 에서 선언되지만 해당 함수 내에서만 접근 가능</li>
</ul>
<ol start="2">
<li><p>initialize해서 가급적 문제가 발생하지 않도록 함.</p>
</li>
<li><p>extern</p>
</li>
</ol>
<ul>
<li>Initialize된 형태로 써라 (쓰지 않을 수 있다면 쓰지 마라)</li>
<li>
<blockquote>
<p>예기치 않은 runtime bug에 빠지지 않도록 해라.</p>
</blockquote>
</li>
</ul>
<doc-anchor-target id="step-2-relocation-1">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-2-relocation-1">#</doc-anchor-trigger>
        <span>Step 2: Relocation</span>
    </h1>
</doc-anchor-target>
<ul>
<li>relocation
<ul>
<li>내가 penn university에서 졸업하고 job을 구하면 relocate : relocate negotiation (주소 바뀌는 것에 대한 signing bonus 등)</li>
<li>내가 penn university에 있다가 다른 회사 사무소 주소로 바귐</li>
<li>이처럼, 내가 현재 접근하는 변수의 주소를 모르기 때문에 relocate하는 과정 : 주소 찾아서 assign해주는 작업</li>
</ul>
</li>
</ul>
<p><strong>Step1: Symbol resolution</strong></p>
<ul>
<li>Once the linker has completed the symbol resolution step, it has associated each symbol reference in the code with exactly one symbol definition
<ul>
<li>linker가 symbol resolution step에 따라 resolve하게 되면 모든 symbol reference는 오직 한개의 symbol definition에 associate된다</li>
</ul>
</li>
<li>At this point, the linker knows the exact sizes of the code and data sections in its input object modules.
<ul>
<li>obj file 생성하게 되면 code, data에 대한 정확한 정보를 알게 됨</li>
</ul>
</li>
<li>만일 그렇지 않다면 link error</li>
</ul>
<p><strong>Now, next step is the relocation step (Step 2)</strong></p>
<ul>
<li><p>Merges the input modules and assigns run-time addresses to eachsymbol</p>
<p>두 개의 object module을 병합하여 실제 각각의 symbol에 run time address를 부여해주는 작업</p>
</li>
<li><p>Moe details will come in the next slides...</p>
</li>
<li><p>relocation</p>
<ul>
<li>내가 penn university에서 졸업하고 job을 구하면 relocate : relocate negotiation (주소 바뀌는 것에 대한 signing bonus 등) - 내가 penn university에 있다가 다른 회사 사무소 주소로 바귐</li>
<li>내가 현재 접근하는 변수의 주소를 모르기 때문에 relocate하는 과정 : 주소 찾아서 assign해줌</li>
</ul>
</li>
</ul>
<ol>
<li>Symbol resolution 복습</li>
</ol>
<ul>
<li>linker가 symbol resolution step에 따라 resolve하게 되면 모든 symbol reference는 오직 한개의 symbol definition에 associate된다
<ul>
<li>만일 그렇지 않다면 link error</li>
</ul>
</li>
<li>obj file 생성하게 되면 code, data에 대한 정확한 정보를 알게 됨</li>
</ul>
<ol start="2">
<li>relocation step</li>
</ol>
<ul>
<li>main.c , .c : 두 개의 object module을 병합하여 실제 각각의 symbol에 run time address를 부여해주는 작업</li>
</ul>
<p><figure class="content-center">
    <img src="12/untitled2014.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<p>relocation : 이 세 가지를 하나로 병합하는 과정</p>
<p>ELF File Format</p>
<p>.Text / .Data</p>
<ul>
<li><p>각 symbol에다 address assign하는 것에 대해 알아보자</p>
</li>
<li><p>relocation : 이 세 가지를 하나로 병합하는 과정</p>
</li>
<li><p>ELF File Format</p>
</li>
<li><p>.Text / .Data : 각 symbol에다 address assign하는 것에 대해 알아보자</p>
</li>
</ul>
<doc-anchor-target id="relocation-entries">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#relocation-entries">#</doc-anchor-trigger>
        <span>Relocation Entries</span>
    </h2>
</doc-anchor-target>
<ul>
<li><p>object module : Compiler 내 assembler가 기계어 code를 만들어 내는데 이를 obj module</p>
</li>
<li><p>When an assembler generates an object module, it does not know where the code and data will ultimately be stored in memory.: 이를 생성해 낼 때, 1. code, data가 나중에 executible file 생성하는 시점에서 memory 어디에 적재될지 모름</p>
</li>
<li><p>Nor does it know the location of any externally defined functions of global variables that are referenced by the module.</p>
<ol start="2">
<li>main.c에서 sum이라는 함수는 외부에서 externally defined : sum이라는 함수를 호출할 때 그 위치가 어디인지 모른다.</li>
</ol>
</li>
<li><p>So, whenever the assembler encounters a reference to an object whose ultimate location is unknown, it generates a relocation entry that tells the linker how to modify the reference when it merges the object file into an executable.</p>
<p>→ 결국에는 location 어디인지 모르는 (global var, external function)은 알려져 있지 않기 때문에 relocation entry라고 해서 하나씩 만든다.</p>
<ul>
<li>ELF file format의 .rel.text / .rel.data에 들어간다</li>
<li>Linker에게 ‘이 주소를 잘 모르니까 나중에 다른 obj와 merge되어 executable file만들 때 이 reference를 수정해야 한다’고 알려줌
<ul>
<li>.rel을 보고 symbol들이 address가 확인되지 않음을 보고 linking 과정에서 병합하며 그 address를 채워준다</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-c"><code v-pre class="language-c">int array[2] = {1, 2};
int main()
{
    int val = sum(array, 2);
    return val;
}
main.c0000000000000000&lt;main&gt; : 0 : 484 : be9 : bfe :
 e813 : 48 17 : c383ec08 020000 00000000 00 00 83c40800 0000sub $0x8, % rspmov $0x2, % esimov $0x0, % edi # % edi = &amp;arraya : R_X86_64_32 array #Relocation entrycallq 13 &lt; main + 0x13 &gt; #sum() f : R_X86_64_PC32 sum - 0x4 #Relocation entryadd $0x8, % rspretqmain.oRelocation EntriesSource : objdump –r –d main.o33</code></pre>
</doc-codeblock></div>
<ul>
<li>Relocation entries for code are placed in .rel.text.</li>
<li>Relocation entries for data are placed in .rel.data. 32</li>
</ul>
<doc-anchor-target id="relocated-text-section">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#relocated-text-section">#</doc-anchor-trigger>
        <span>Relocated .text section</span>
    </h2>
</doc-anchor-target>
<p><figure class="content-center">
    <img src="12/untitled2015.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<ul>
<li>Relocation: 앞의 obj module들을 병합한 다음에 각 symbol에 대해 runtime address
<ul>
<li>(Vm address O, not physical) E8 05 00 00 00</li>
<li>instruction 수행할 때 relative</li>
<li>현재 주소 :  PC는 항상 다음 주소 (명령어 fetch하는 그 순간에) PC가 가리키는 주소에 5 더하면 <sum>의 주소가 나온다 :</li>
<li>상대적인 주소 : detail은 assembler, linking / 2 path scanning을 하기 때문에</li>
</ul>
</li>
</ul>
<doc-anchor-target id="loading-executable-object-files">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#loading-executable-object-files">#</doc-anchor-trigger>
        <span>Loading Executable Object Files</span>
    </h1>
</doc-anchor-target>
<p><figure class="content-center">
    <img src="12/untitled2016.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<ul>
<li>ELF 보면 되고 process address space : 0x400000~2^48 -1 (process)</li>
<li>kernel</li>
<li>shaerd library : 동적으로 linking 만들어지는 library, API memory map을 위함</li>
<li>Heap : break point만큼 heap의 크기</li>
<li>segment : r/w data</li>
<li>Shared memory 하나 올라오고 Application a, b 뜰 때 필요에 따라 reference함
(그냥 copy하는게 아님) - c가 shared library라고 할 때 ptr로 그냥 갈 수 있기 때문에 c는 하나만 있으면 되어 duplicate하지 않아도 됨</li>
<li>memory mapped region에 대한 ptr가 들어가있는 것.</li>
</ul>
<doc-anchor-target id="packaging-commonly-used-functions">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#packaging-commonly-used-functions">#</doc-anchor-trigger>
        <span>Packaging Commonly Used Functions</span>
    </h2>
</doc-anchor-target>
<ul>
<li><p>How to package functions commonly used by programmers?</p>
<p>자주 쓰는 함수 모아둠  - library 형태로 모아 둠</p>
</li>
<li><p>Math, I/O, memory management, string manipulation, etc.- Awkward, given the linker framework so far:</p>
<ul>
<li>memory management : malloc, calloc 등 모아서 자주 쓰니까 어떻게 하나의 패키지로 쓰는가</li>
</ul>
</li>
<li><p>Option 1: Put all functions into a single source file</p>
</li>
</ul>
<ol>
<li>모든 함수들을 코드들에 집어넣음
<ul>
<li>Programmers link big object file into their programs</li>
<li>Space and time inefficient
<ul>
<li>생성되는 executable code 자체가 많이 커짐 → 시간, 공간 많이 차지함</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li>Option 2: Put each function in a separate source file</li>
</ul>
<ol start="2">
<li><p>modular 접근 방법처럼 기능 별로 file들을 쪼갠다</p>
<p>각 file들에는 특정 기능 수행하는 fn들을 따로 따로 만들어 줌</p>
<ul>
<li>필요한 것만 링킹 - 모든 소스 파일을 다 집어넣을 필요 없음</li>
<li>Programmers explicitly link appropriate binaries into their programs</li>
<li>More efficient, but burdensome on the programmer36
<ul>
<li>효율적이지만 프로그래머가 이해해주어야 함</li>
</ul>
</li>
</ul>
</li>
</ol>
<doc-anchor-target id="old-fashioned-solution-static-libraries">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#old-fashioned-solution-static-libraries">#</doc-anchor-trigger>
        <span>Old-fashioned Solution: Static Libraries</span>
    </h2>
</doc-anchor-target>
<ul>
<li><p>Static libraries (.a archive files)</p>
</li>
<li><p>Concatenate related relocatable object files into a single file with an index (called an archive).</p>
</li>
<li><p>Enhance linker so that it tries to resolve unresolved external references by looking for the symbols in one or more archives.</p>
</li>
<li><p>If an archive member file resolves reference, link it into the executable.</p>
</li>
<li><p>static linking - static library</p>
</li>
<li><p>archive file</p>
</li>
</ul>
<p>Object files 들을 concatenate해서 하나의 file로 만듬</p>
<p>index를 통해 archive 안에 sum, average 등의 함수를 찾아서 참조할 수 있도록 함</p>
<ul>
<li>archive 안에서 symbol 찾아보고 나서 실행 file linking</li>
</ul>
<doc-anchor-target id="creating-static-libraries">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#creating-static-libraries">#</doc-anchor-trigger>
        <span>Creating Static Libraries</span>
    </h2>
</doc-anchor-target>
<p>함수별로 모듈만들어 하나의 archive로 만들어 static link 만들 수 있다.</p>
<p><figure class="content-center">
    <img src="12/untitled2017.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<ul>
<li>Archiver allows incremental updates-</li>
<li>Recompile function that changes and replace .o file in archive.38</li>
</ul>
<doc-anchor-target id="commonly-used-libraries">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#commonly-used-libraries">#</doc-anchor-trigger>
        <span>Commonly Used Libraries</span>
    </h2>
</doc-anchor-target>
<ul>
<li>libc.a (the C standard library)
<ul>
<li>4.6 MB archive of 1496 object files.</li>
</ul>
</li>
<li>I/O, memory allocation, signal handling, string handling, data and time, random numbers, integer mathlibm.a (the C math library)
<ul>
<li>2 MB archive of 444 object files.</li>
</ul>
</li>
</ul>
<p><figure class="content-center">
    <img src="12/untitled2018.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<doc-anchor-target id="linking-with-static-libraries">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#linking-with-static-libraries">#</doc-anchor-trigger>
        <span>Linking with Static Libraries</span>
    </h1>
</doc-anchor-target>
<ul>
<li>libvector.a</li>
</ul>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-c"><code v-pre class="language-c">#include &lt;stdio.h&gt;
#include &quot;vector.h&quot;
int x[2] = {1, 2};
int y[2] = {3, 4};
int z[2];
int main()
{
    addvec(x, y, z, 2);
    printf(&quot;z = [%d %d]\n”,z[0], z[1]);
    return 0;
}
main2.c40
void addvec(int *x, int *y, int *z, int n)
{
    int i;
    for (i = 0; i &lt; n; i++)
}
z[i] = x[i] + y[i];
addvec.c
void multvec(int *x, int *y, int *z, int n)
{
    int i;
    for (i = 0; i &lt; n; i++)
        z[i] = x[i] * y[i];
}</code></pre>
</doc-codeblock></div>
<ul>
<li>41page - addvec.o는 무엇을 의미하는가:
<ul>
<li>Main 함수에서 사용하는 addvec</li>
<li>다 올리는 게 아니라 archive라는 utility를 통해서 object concatenate하는 건데 addvec만 사용하기에 이거만 빼서 link한다는 의미이다.</li>
</ul>
</li>
<li>static link : 사용되는 object file 100개를 모아두고 archive처럼 code generation할 때 다 모아서 symbol reolution하고 link하는 것임.
<ul>
<li>static linking에서 duplication생기는 이유</li>
<li>똑같이 main함수 생성해서 addvec(x,y,z, 3)을 선언해서 넣었다고 하자.
이 코드들이 생성될 때 addvec.o가 proc2에 포함되어 있다.
나중에 또 proc3을 생성할 때에도 addvec.o가 들어가 있다.</li>
</ul>
</li>
</ul>
<doc-anchor-target id="using-static-libraries">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#using-static-libraries">#</doc-anchor-trigger>
        <span>Using Static Libraries</span>
    </h2>
</doc-anchor-target>
<doc-anchor-target id="linkers-algorithm-for-resolving-external-references">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#linkers-algorithm-for-resolving-external-references">#</doc-anchor-trigger>
        <span>Linker’s algorithm for resolving external references:</span>
    </h3>
</doc-anchor-target>
<ul>
<li>symbol resolving algorithm : linker가 사용하는 algorithm</li>
<li>Scan .o files and .a files in the command line order.</li>
<li>During the scan, keep a list of the current unresolved references.</li>
<li>As each new .o or .a file, obj, is encountered, try to resolve each unresolved reference in the list against the symbols defined in obj.</li>
<li>If any entries in the unresolved list at end of scan, then error.</li>
</ul>
<doc-anchor-target id="problem">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#problem">#</doc-anchor-trigger>
        <span>Problem:</span>
    </h3>
</doc-anchor-target>
<p><figure class="content-center">
    <img src="12/untitled2019.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<ul>
<li><p>Command line order matters!</p>
</li>
<li><p>Moral: put libraries at the end of the command line.unix&gt; gcc -L. libtest.o -lmineunix&gt; gcc -L. -lmine libtest.olibtest.o: In function main&#x27;: libtest.o(.text+0x4): undefined reference to libfun&#x27;42</p>
</li>
<li><p>Compiler를 통해 example - Gcc -L : object file에서 library에 있는 file을 찾는 것</p>
</li>
</ul>
<ol>
<li>Test file + library : test file 안에 선언되어 있는 걸 external reference해서 없으면 library를 ㅁ찾아본다
<ul>
<li>Test라는 file obj module안에서 없으면 library안에 있으면 해결되기 때문에</li>
</ul>
</li>
<li>library + test file 넣으면 error가 뜨게 됨. (reference 안되어 있음)
<ul>
<li>-lmine에는 있지만 libtest.o에는 없어서 그 다음으로 넘어가야 하는데 그 다음 file이 존재하지 않으므로 error 발생</li>
<li>command line 순서대로 수행 * order가 되게 중요 → library는 맨 뒤</li>
<li>scanning하면서 현재 resolve 안된 reference 기록
그리고 각각에 대해 unresolved reference를 뒤에서 찾아본다 : 있으면 resolve, 없으면 error</li>
</ul>
</li>
</ol>
<doc-anchor-target id="modern-solution-shared-libraries">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#modern-solution-shared-libraries">#</doc-anchor-trigger>
        <span>Modern Solution: Shared Libraries</span>
    </h1>
</doc-anchor-target>
<doc-anchor-target id="static-libraries-have-the-following-disadvantages">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#static-libraries-have-the-following-disadvantages">#</doc-anchor-trigger>
        <span>Static libraries have the following disadvantages:</span>
    </h3>
</doc-anchor-target>
<ul>
<li>dynamic library = shared library</li>
<li>Compile time때 static linking을 통한 linking
<ul>
<li>지금 돌아가는 executable file이라든지 둘 다 library를 가져다 사용하게 되면 static하게 linking했기 때문에 static이던 running중이던 동일한 file을 본인의 executable에 포함 → 중복된 contents</li>
</ul>
</li>
<li>Duplication in the stored executables (every function needs libc)
<ul>
<li>Duplication in the running executables</li>
<li>Minor bug fixes of system libraries require each application to explicitly relink
<ul>
<li>bug 수정 :application 수정하고 linking 다시 해야 함</li>
</ul>
</li>
</ul>
</li>
</ul>
<doc-anchor-target id="modern-solution-shared-libraries-1">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#modern-solution-shared-libraries-1">#</doc-anchor-trigger>
        <span>Modern solution: Shared Libraries</span>
    </h3>
</doc-anchor-target>
<ul>
<li><p>Object files that contain code and data that are loaded and linked
해당 library 부분만 수정해서 되는게 아니라 application을 relink시켜 또 다시 link해야 함</p>
</li>
<li><p>into an application dynamically, at either load-time or run-time</p>
<ul>
<li>load time, runtime에 동적으로 shared library가 linking됨</li>
</ul>
</li>
<li><p>Also called: dynamic link libraries, DLLs, .so files43</p>
</li>
<li><p>dynamic library = shared library</p>
<ul>
<li>Compile time때 static linking을 통한 linking</li>
<li>지금 돌아가는 executable file이라든지 둘 다 library를 가져다 사용하게 되면 static하게 linking했기 때문에 static이던 running중이던 동일한 file을 본인의 executable에 포함 → 중복된 contents</li>
<li>bug 수정 :application 수정하고 linking 다시 해야 함</li>
<li>해당 library 부분만 수정해서 되는게 아니라 application을 relink시켜 또 다시 link해야 함</li>
<li>shared: load time, runtime에 동적으로 shared library가 linking됨</li>
</ul>
</li>
</ul>
<p>Library를 여러개 dynamically 사용할 수 있어서 shared</p>
<p>Loading time, rumtime이 될 수 있음</p>
<doc-anchor-target id="dynamic-linking-can-occur-when-executable-is-first-loaded-and-run-load-time-linking">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#dynamic-linking-can-occur-when-executable-is-first-loaded-and-run-load-time-linking">#</doc-anchor-trigger>
        <span>Dynamic linking can occur when executable is first loaded and run (load-time linking).</span>
    </h3>
</doc-anchor-target>
<ul>
<li>Common case for Linux, handled automatically by the dynamic linker (<a href="http://ld-linux.so/">ld-linux.so</a>).§</li>
<li>Standard C library (<a href="http://libc.so/">libc.so</a>) usually dynamically linked.</li>
</ul>
<doc-anchor-target id="dynamic-linking-can-also-occur-after-program-has-begun-run-time-linking">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#dynamic-linking-can-also-occur-after-program-has-begun-run-time-linking">#</doc-anchor-trigger>
        <span>Dynamic linking can also occur after program has begun (run-time linking).</span>
    </h3>
</doc-anchor-target>
<ul>
<li>In Linux, this is done by calls to the dlopen() interface.</li>
<li>Distributing software.</li>
<li>High-performance web servers.§ Runtime library interpositioning.</li>
</ul>
<doc-anchor-target id="shared-library-routines-can-be-shared-by-multiple-processes">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#shared-library-routines-can-be-shared-by-multiple-processes">#</doc-anchor-trigger>
        <span>Shared library routines can be shared by multiple processes.</span>
    </h3>
</doc-anchor-target>
<ul>
<li>More on this when we learn about virtual memory 44</li>
</ul>
<doc-anchor-target id="dynamic-linking-at-load-time">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#dynamic-linking-at-load-time">#</doc-anchor-trigger>
        <span>Dynamic Linking at Load-time</span>
    </h2>
</doc-anchor-target>
<p><figure class="content-center">
    <img src="12/untitled2020.png" alt="Untitled" />
    <figcaption class="caption">Untitled</figcaption>
</figure>
</p>
<ul>
<li>static link : addvec, multvec library 모두 main2.o에 concatenate했어야 했음</li>
<li>dynamic link : 사용되는 function 중 main2가 reference하겠다는 note정도만 partly 저장</li>
<li>그리고 나서 실제 program 실행할 때 library 해당하는 external reference 되어 있는 name들을 resolve하면서 나중에 loading할 때 dynamic linker에 의해 memory에 올라갈 때 비로소 shared library가 이어짐.</li>
</ul>
<p>(둘 다 memory에 load되어 있을 때)</p>
<doc-anchor-target id="dynamic-linking-at-run-time">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#dynamic-linking-at-run-time">#</doc-anchor-trigger>
        <span>Dynamic Linking at Run-time</span>
    </h2>
</doc-anchor-target>
<ul>
<li>dlopen을 사용해서 shaerd library 선언하고 dlsym을 통해 addvec을 pointer로 넘거받음
<ul>
<li>그리고 그 함수를 가지고 원래 있는 함수처럼 사용</li>
<li>code 실행할 때 linking하겠다 : runtime</li>
<li>필요에 따라 memory에 그 때 그때 옮긴다</li>
</ul>
</li>
</ul>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-c"><code v-pre class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;dlfcn.h&gt;
int x[2] = {1, 2};
int y[2] = {3, 4};
int z[2];
int main()
{
    void *handle;
    void (*addvec)(int *, int *, int *, int);
    char error;
    /* Dynamically load the shared library that contains addvec() */
    handle = dlopen(&quot;./libvector.so&quot;, RTLD_LAZY);
    if (!handle)
    {
        fprintf(stderr, &quot;%s\n&quot;, dlerror());
        exit(1);
    }

    /* Get a pointer to the addvec() function we just loaded */
    addvec = dlsym(handle, &quot;addvec&quot;);
    if ((error = dlerror()) != NULL)
    {
        fprintf(stderr, &quot;%s\n&quot;, error);
        exit(1);
    }
    /* Now we can call addvec() just like any other function */
    addvec(x, y, z, 2);
    printf(&quot;z = [%d %d]\n&quot;, z[0], z[1]);
    /* Unload the shared library */ 
    
    if (dlclose(handle) &lt; 0)
    {
        fprintf(stderr, &quot;%s\n&quot;, dlerror());
        exit(1);
    }
    return 0;
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="linking-summary">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#linking-summary">#</doc-anchor-trigger>
        <span>Linking Summary</span>
    </h2>
</doc-anchor-target>
<ul>
<li>Linking is a technique that allows programs to be constructed from multiple object files.-
<ul>
<li>여러 개의 object로 하나의 file을 만들 때 사용됨</li>
</ul>
</li>
<li>Linking can happen at different times in a program’s lifetime:
언제 하느냐에 따라 /방법에 따라 여러 많은 error들을 확인하여 resolve할 수 있음
<ul>
<li>실제 memory 사용량, 실행 시간 등의 장단점을 구분할 수 있음</li>
<li>Compile time (when a program is compiled)</li>
<li>Load time (when a program is loaded into memory)</li>
<li>Run time (while a program is executing)-</li>
</ul>
</li>
<li>Understanding linking can help you avoid nasty errors and make you a better programmer.</li>
</ul>
<doc-anchor-target id="7-13-case-study-library-interpositioning">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#7-13-case-study-library-interpositioning">#</doc-anchor-trigger>
        <span>7. 13. Case study: Library interpositioning</span>
    </h1>
</doc-anchor-target>
<ul>
<li><strong>Library interpositioning : powerful linking technique that allows programmers to intercept calls to arbitrary functions</strong></li>
<li><strong>Interpositioning can occur at:</strong>
<ul>
<li>§Compile time: When the source code is compiled</li>
<li>§Link time: When the relocatable object files are statically linked to form an executable object file</li>
<li>§Load/run time: When an executable object file is loaded into memory, dynamically linked, and then executed.</li>
</ul>
</li>
</ul>
<doc-anchor-target id="some-interpositioning-applications">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#some-interpositioning-applications">#</doc-anchor-trigger>
        <span><strong>Some Interpositioning Applications</strong></span>
    </h2>
</doc-anchor-target>
<ul>
<li><p>Security</p>
<ul>
<li>Confinement (sandboxing)</li>
<li>Behind the scenes encryption</li>
</ul>
</li>
<li><p>Debugging</p>
<ul>
<li>In 2014, two Facebook engineers debugged a treacherous 1-year old bug in their iPhone app using interpositioning</li>
<li>Code in the SPDY networking stack was writing to the wrong location</li>
<li>Solved by intercepting calls to Posix write functions (write, writev, pwrite)</li>
</ul>
<p>Source:  Facebook engineering blog post at <a href="https://code.facebook.com/posts/313033472212144/debugging-file-corruption-on-ios/">https://code.facebook.com/posts/313033472212144/debugging-file-corruption-on-ios/</a></p>
</li>
<li><p>Monitoring and Profiling</p>
<ul>
<li>Count number of calls to functions</li>
<li>Characterize call sites and arguments to functions</li>
<li>Malloc tracing
<ul>
<li>Detecting memory leaks</li>
<li>Generating address traces52</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Developer가 기존의 function들을 본인의 function으로 intercept하여 실행하고 다시 돌아올 수 있도록 하는 기법</p>
<ol>
<li><p>Compile time : src code compile 될 때 interpositioning. Malloc함수 자체를 내가 짠 코드로 interpositioning</p>
</li>
<li><p>Link time : executable file 만들 때</p>
</li>
<li><p>Load, run time : obj file이 load될 때 동적 link</p>
</li>
</ol>
<doc-anchor-target id="example-program">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#example-program">#</doc-anchor-trigger>
        <span>Example program</span>
    </h2>
</doc-anchor-target>
<p>32byte 할당하여 tracking</p>
<ul>
<li>compile time에 mymalloc, myfree로 대치</li>
</ul>
<p>지금 배우고 있는 interposition technique</p>
<ul>
<li>compile, link, loadtime 때 할 수 있다.</li>
</ul>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-c"><code v-pre class="language-c">#include &lt;stdio.h&gt;
#include &lt;malloc.h&gt;

int main()
{
    int *p = malloc(32);
    free(p);
    return(0);
}</code></pre>
</doc-codeblock></div>
<ul>
<li>Goal: trace the addresses and sizes of the allocated and freed blocks, without breaking the program, and without modifying the source code.</li>
<li>Three solutions: interpose on the lib malloc and free functions at compile time, link time, and load/run time.</li>
</ul>
<doc-anchor-target id="compile-time-interpositioning">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#compile-time-interpositioning">#</doc-anchor-trigger>
        <span>Compile-time Interpositioning</span>
    </h1>
</doc-anchor-target>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-cpp"><code v-pre class="language-cpp">#ifdef COMPILETIME
#include &lt;stdio.h&gt;
#include &lt;malloc.h&gt;

/* malloc wrapper function */
void *mymalloc(size_t size)
{
    void *ptr = malloc(size);
    printf(&quot;malloc(%d)=%p\n&quot;,
           (int)size, ptr);
    return ptr;
}

/* free wrapper function */
void myfree(void *ptr)
{
    free(ptr);
    printf(&quot;free(%p)\n&quot;, ptr);
}
#endif 
#define malloc(size) mymalloc(size)
#define free(ptr) myfree(ptr)

void *mymalloc(size_t size);
void myfree(void *ptr);</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-cpp"><code v-pre class="language-cpp">linux&gt; make intc
gcc -Wall -DCOMPILETIME -c mymalloc.c
gcc -Wall -I. -o intc int.c mymalloc.o
linux&gt; make runc
./intc
malloc(32)=0x1edc010
free(0x1edc010)
linux&gt;</code></pre>
</doc-codeblock></div>
<p>mymalloc code</p>
<ul>
<li>C library에서 제공해 주는 malloc을 사용한 후 그 다음에 무엇을 할 것이냐 : 기존 c library에서 제공하는 malloc을 사용하는 게 아니라 내가 작성한 mymalloc, myfree로 replace (@compile time) -&gt; 즉, 현재 mymalloc은 기존의 malloc의 wrapper함수처럼 쓰여지는데 앞에 있던 코드에서 malloc을 compile time때 mymalloc/myfree으로 대치되어 실행하도록 할 수 있다.</li>
<li>mymalloc/myfree trace하기 위해서 printf code</li>
</ul>
<p>기존에는 malloc에다 ptr을 가져다가 안에서 mymalloc으로 대치함으로써 실제 malloc을 내부적으로 call하지만 tracing위한 printf 삽입하여 - 어떤 block이 alloc/free되었는지 확인</p>
<p>preprocessing</p>
<ul>
<li>compilie할 때 내부의 malloc이 mymalloc / free가 myfree로 바뀌어 구동되게 된다.</li>
</ul>
<p>(linux print 결과)</p>
<ul>
<li>int.c, mymalloc.c 같이 compile</li>
<li>원래는 아무것도 print하지 않는데 mymalloc, myfree를 통해서 원하는 정보를 tracing할 수 있게 됨. -&gt; 이 주소에다가 우리가 allocate했음을 알고 vm주소를 deallocate했음을 확인할 수 있음</li>
</ul>
<doc-anchor-target id="link-time-interpositioning">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#link-time-interpositioning">#</doc-anchor-trigger>
        <span>Link-time Interpositioning</span>
    </h1>
</doc-anchor-target>
<p>linktime 때 하는 경우 → object를 만들고 Wl option을 주고 —wrap, malloc/free</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-cpp"><code v-pre class="language-cpp">#ifdef LINKTIME
#include &lt;stdio.h&gt;

void *__real_malloc(size_t size);
void __real_free(void *ptr);

/* malloc wrapper function */
void *__wrap_malloc(size_t size)
{
    void *ptr = __real_malloc(size); /* Call libc malloc */
    printf(&quot;malloc(%d) = %p\n&quot;, (int)size, ptr);
    return ptr;
}

/* free wrapper function */
void __wrap_free(void *ptr)
{
    __real_free(ptr); /* Call libc free */
    printf(&quot;free(%p)\n&quot;, ptr);
}
#endif</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-cpp"><code v-pre class="language-cpp">linux&gt; make intl
gcc -Wall -DLINKTIME -c mymalloc.c
gcc -Wall -c int.c
gcc -Wall -Wl,--wrap,malloc -Wl,--wrap,free -o intl int.o mymalloc.o
linux&gt; make runl
./intl
malloc(32) = 0x1aa0010
free(0x1aa0010)
linux&gt;</code></pre>
</doc-codeblock></div>
<ul>
<li><strong>The <code v-pre>-Wl</code> flag passes argument to linker, replacing each comma with a space.</strong>
<ul>
<li>-wl flag 자체가 argument를 linker에게 넘겨주어 각각의 comma로 되어 있는 것을 space로 바꾸어 대치하라는 command</li>
</ul>
</li>
<li><strong>The  <code v-pre>--wrap_malloc</code> arg instructs linker to resolve references in a special way:</strong>
<ul>
<li>나중에 —wrap,malloc/free를 gcc compiler에게 넘겨줌으로서 linker에 이야기 : reference되어 있는데 Linker에게 gcc compilier가 이런 식으로 resolve하라고 만든다.
<ul>
<li>malloc → <code v-pre>wrap malloc</code></li>
<li><code v-pre>Real malloc</code> → malloc</li>
</ul>
</li>
<li>Refs to malloc should be resolved as __wrap_malloc</li>
<li>Refs to   __real_malloc should be resolved as malloc</li>
</ul>
</li>
</ul>
<p>→ link time에 그 값을 가져다 reserve한 다음 원하는 대로 interposition</p>
<doc-anchor-target id="loadrun-time-interpositioning">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#loadrun-time-interpositioning">#</doc-anchor-trigger>
        <span><strong>Load/Run-time Interpositioning</strong></span>
    </h1>
</doc-anchor-target>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-cpp"><code v-pre class="language-cpp">#ifdef RUNTIME
#define _GNU_SOURCE
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;dlfcn.h&gt;

/* malloc wrapper function */
void *malloc(size_t size)
{
    void *(*mallocp)(size_t size);
    char *error;

    mallocp = dlsym(RTLD_NEXT, &quot;malloc&quot;); /* Get addr of libc malloc */
    if ((error = dlerror()) != NULL) {
        fputs(error, stderr);
        exit(1);
    }
    char *ptr = mallocp(size); /* Call libc malloc */
    printf(&quot;malloc(%d) = %p\n&quot;, (int)size, ptr);
    return ptr;
}
/* free wrapper function */
void free(void *ptr)
{
    void (*freep)(void *) = NULL;
    char *error;

    if (!ptr)
        return;

    freep = dlsym(RTLD_NEXT, &quot;free&quot;); /* Get address of libc free */
    if ((error = dlerror()) != NULL) {
        fputs(error, stderr);
        exit(1);
    }
    freep(ptr); /* Call libc free */
    printf(&quot;free(%p)\n&quot;, ptr);
}
#endif</code></pre>
</doc-codeblock></div>
<p>&lt;Load/runtime interpositioning&gt;</p>
<ul>
<li>dlsym : Library malloc의 address를 받아오기 위함</li>
<li>mallocp(size) : malloc이라는 wrapper 함수와 free라는 wrapper 함수가 있는데 나중에 동적으로 malloc이라는 wrapper함수에서 동적으로 malloc이 호출되는 그 순간에 malloc의 ptr address를 return하고 이를 가지고 print하게 하는 방법</li>
<li>동적으로 interpositioning을 malloc./ free
<ul>
<li>동일하게 free함수 호출했을 때 address를 받아오고 free를 한다음 printf를 통해 ptr값에 해당하는 heap에 있는 address 공간을 free</li>
</ul>
</li>
<li>The <code v-pre>LD_PRELOAD</code> environment variable tells the dynamic linker to resolve unresolved refs (e.g., to malloc) by looking in mymalloc.so first.
<ul>
<li>‘LD Preload 환경 변수’를 통해 내가 찾고자 하는 함수를 code 안에서 찾을 수 있음.</li>
<li>순차적으로 찾고 동적으로 실행되는 그 때, 앞에 print하고자 하는 value들과 size를 print하고 free하며 끝남</li>
<li>환경 변수가 dynamic link에게 mymalloc.so file (shared library)를 찾아보고 malloc으로 대체할 수 있도록 하는 역할을 수행함</li>
</ul>
</li>
</ul>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-cpp"><code v-pre class="language-cpp">linux&gt; make intr
gcc -Wall -DRUNTIME -shared -fpic -o mymalloc.so mymalloc.c -ldl
gcc -Wall -o intr int.c
linux&gt; make runr
(LD_PRELOAD=&quot;./mymalloc.so&quot; ./intr)
malloc(32) = 0xe60010
free(0xe60010)
linux&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="interpositioning-recap">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#interpositioning-recap">#</doc-anchor-trigger>
        <span><strong>Interpositioning Recap</strong></span>
    </h1>
</doc-anchor-target>
<ul>
<li><strong>Compile Time</strong>
<ul>
<li>compile time : macro 확장처럼 mymalloc</li>
<li>Apparent calls to malloc/free get macro-expanded into calls to mymalloc/myfree</li>
</ul>
</li>
<li><strong>Link Time</strong>
<ul>
<li>link time : linker에게 trick을 불러 이름 resolution을 바꾸어 준다</li>
<li>Use linker trick to have special name resolutions</li>
<li>malloc → <code v-pre>__wrap_malloc</code></li>
<li><code v-pre>__real_malloc</code> → malloc</li>
</ul>
</li>
<li><strong>Load/Run Time</strong>
<ul>
<li>load/run time : dynamic linking을 통해서 실제 malloc, free를 다른 이름으로 load할 때 대치하게 함으로서 원하는 interpositioning을 수행할 수 있음</li>
<li>Implement custom version of malloc/free that use dynamic linking to load library malloc/free under different names</li>
</ul>
</li>
</ul>
<p>→ 세 가지 방법 중 load/runtime, compile time때 많이 수행. 물론 compile의 경우 preprocess 단계에서 내 것으로 가로채기 할 수 있으나 다 같이 compile해야 하는 문제점</p>
<ul>
<li>load/runtime의 경우에는 이에 반해 따로 compile할 필요 없고, so file을 찾도록 하여 내가 작성한 함수로 interpositioning 기술을 적용할 수 있다</li>
</ul>

                                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results />
                            </div>
                            <footer class="clear-both">
                            
                                <nav class="flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../sp/11-dynamic-memory-allocation-advanced-concepts-66fc829848594b47a69bd399782c384d/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                                                <span class="block mt-1">11. Dynamic Memory Allocation: Advanced Concepts</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../sp/13-virtual-memory-concepts-3806d1e0627b4582804ad455340aca9a/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                                                <span class="block mt-1">13. Virtual Memory: Concepts</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div class="border-t dark:border-dark-650 pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between">
                                <div>
                                    <ul class="flex flex-wrap items-center text-sm">
                                    </ul>
                                </div>
                                <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>© Copyright 2020 - 2022 KyuHwan Shim, All rights reserved.</p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="docs-overlay-target"></div>

    <script>window.__DOCS__ = { "title": "12. Linking", level: 2, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false }</script>
</body>
</html>
